<!DOCTYPE html>
<!-- saved from url=(0097)https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/ -->
<html lang="pt-br" class=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="google-site-verification" content="9VEhGCK14HNyG1P54ieEzIvVCfVJlZDp7W_6TRQIYa8"><link rel="alternate" type="application/rss+xml" title="William Oliveira | Inclusão social através do ensino de programação e front-end" href="https://woliveiras.com.br/feed.xml"><link rel="icon" href="https://woliveiras.com.br/images/favicon.png" type="image/png"><title>Construindo uma API com Node.js - Parte 1: criando e listando dados - William Oliveira</title><link rel="canonical" href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/"><meta property="og:site_name" content="William Oliveira | Inclusão social através do ensino de programação e front-end"><meta property="og:title" content="Construindo uma API com Node.js - Parte 1: criando e listando dados - William Oliveira"><meta property="og:type" content="website"><meta property="og:url" content="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/"><meta name="twitter:creator" content="@_uillaz"><meta property="og:image" content="https://woliveiras.com.br/images/posts/ed-van-duijn-2uTjeMfeVEU-unsplash.jpg"><meta name="twitter:image" content="/images/posts/ed-van-duijn-2uTjeMfeVEU-unsplash.jpg"><meta property="og:image:alt" content="Page image for William Oliveira"><meta name="twitter:image:alt" content="Page image for William Oliveira"><script type="text/javascript" async="" src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/analytics.js.download"></script><script async="" src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/js"></script><script async="" src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/f.txt"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());

      gtag('config', 'UA-25964646-1');</script><script>document.documentElement.classList.remove('no-js');</script><style>*{box-sizing:border-box}:after,:before{box-sizing:inherit}body,dd,dl,dt,figcaption,figure,h1,h2,h3,h4,li,ol,p,ul{margin:0;padding:0}body{-ms-overflow-style:-ms-autohiding-scrollbar;scroll-behavior:smooth;font-size:1rem;min-height:100vh}ol[class],ul[class]{list-style:none}a:not([class]){text-decoration:underline;text-decoration-skip-ink:auto;cursor:pointer}input::-webkit-input-placeholder,select::-webkit-input-placeholder,textarea::-webkit-input-placeholder{line-height:normal}img{max-width:100%}@media(prefers-reduced-motion:reduce){*{-webkit-animation:none!important;animation:none!important;transition:none!important;scroll-behavior:auto!important}}.sf-flow{--flow-space:1em}.sf-flow>*+*{margin-top:1em;margin-top:var(--flow-space)}.align-start{align-items:flex-start}.align-center{align-items:center}.align-end{align-items:flex-end}.bg-primary{background:#173854}.bg-primary-shade{background:#102538}.bg-primary-glare{background:#22547c}.bg-highlight{background:#fedb8b}.bg-light{background:#fff}.bg-mid{background:#ccc}.bg-dark{background:#333}.bg-slate{background:#404040}.color-primary{color:#173854}.color-primary-shade{color:#102538}.color-primary-glare{color:#22547c}.color-highlight{color:#fedb8b}.color-light{color:#fff}.color-mid{color:#ccc}.color-dark{color:#333}.color-slate{color:#404040}.box-block{display:block}.box-flex{display:flex}.box-inline-flex{display:inline-flex}.box-hide{display:none}.font-base{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol'}.font-serif{font-family:Lora,serif}.gap-top-300{margin-top:.8rem}.gap-top-500{margin-top:1.25rem}.gap-top-600{margin-top:1.56rem}.gap-top-700{margin-top:1.95rem}.gap-top-800{margin-top:2.44rem}.gap-top-900{margin-top:3.05rem}.gap-top-base{margin-top:1rem}.gap-top-max{margin-top:4rem}.gap-bottom-300{margin-bottom:.8rem}.gap-bottom-500{margin-bottom:1.25rem}.gap-bottom-600{margin-bottom:1.56rem}.gap-bottom-700{margin-bottom:1.95rem}.gap-bottom-800{margin-bottom:2.44rem}.gap-bottom-900{margin-bottom:3.05rem}.gap-bottom-base{margin-bottom:1rem}.gap-bottom-max{margin-bottom:4rem}.leading-tight{line-height:1.2}.leading-mid{line-height:1.5}.leading-loose{line-height:1.7}.measure-long{max-width:75ch}.measure-short{max-width:60ch}.measure-compact{max-width:40ch}.pad-top-300{padding-top:.8rem}.pad-top-500{padding-top:1.25rem}.pad-top-600{padding-top:1.56rem}.pad-top-700{padding-top:1.95rem}.pad-top-800{padding-top:2.44rem}.pad-top-900{padding-top:3.05rem}.pad-top-base{padding-top:1rem}.pad-top-max{padding-top:4rem}.pad-bottom-300{padding-bottom:.8rem}.pad-bottom-500{padding-bottom:1.25rem}.pad-bottom-600{padding-bottom:1.56rem}.pad-bottom-700{padding-bottom:1.95rem}.pad-bottom-800{padding-bottom:2.44rem}.pad-bottom-900{padding-bottom:3.05rem}.pad-bottom-base{padding-bottom:1rem}.pad-bottom-max{padding-bottom:4rem}.pad-left-300{padding-left:.8rem}.pad-left-500{padding-left:1.25rem}.pad-left-600{padding-left:1.56rem}.pad-left-700{padding-left:1.95rem}.pad-left-800{padding-left:2.44rem}.pad-left-900{padding-left:3.05rem}.pad-left-base{padding-left:1rem}.pad-left-max{padding-left:4rem}.space-between{justify-content:space-between}.space-around{justify-content:space-around}.space-before{justify-content:flex-end}.stack-300{z-index:0}.stack-400{z-index:10}.stack-500{z-index:20}.stack-600{z-index:30}.stack-700{z-index:40}.ta-right{text-align:right}.ta-left{text-align:left}.ta-center{text-align:center}.text-300{font-size:.8rem}.text-500{font-size:1.25rem}.text-600{font-size:1.56rem}.text-700{font-size:1.95rem}.text-800{font-size:2.44rem}.text-900{font-size:3.05rem}.text-base{font-size:1rem}.text-max{font-size:4rem}.weight-light{font-weight:300}.weight-regular{font-weight:400}.weight-mid{font-weight:600}.weight-bold{font-weight:700}.width-full{width:100%}.width-half{width:50%}.width-quarter{width:25%}.width-third{width:33.3333333333%}@media screen and (min-width:48rem){.md\:align-start{align-items:flex-start}.md\:align-center{align-items:center}.md\:align-end{align-items:flex-end}.md\:box-block{display:block}.md\:box-flex{display:flex}.md\:box-inline-flex{display:inline-flex}.md\:box-hide{display:none}.md\:space-between{justify-content:space-between}.md\:space-around{justify-content:space-around}.md\:space-before{justify-content:flex-end}.md\:ta-right{text-align:right}.md\:ta-left{text-align:left}.md\:ta-center{text-align:center}.md\:text-300{font-size:.8rem}.md\:text-500{font-size:1.25rem}.md\:text-600{font-size:1.56rem}.md\:text-700{font-size:1.95rem}.md\:text-800{font-size:2.44rem}.md\:text-900{font-size:3.05rem}.md\:text-base{font-size:1rem}.md\:text-max{font-size:4rem}.md\:width-full{width:100%}.md\:width-half{width:50%}.md\:width-quarter{width:25%}.md\:width-third{width:33.3333333333%}}:root{--color-primary:#173854;--color-primary-shade:#102538;--color-primary-glare:#22547c;--color-highlight:#fedb8b;--color-light:#ffffff;--color-mid:#cccccc;--color-dark:#333333;--color-slate:#404040;--color-mode:"light";--color-bg:#ffffff;--color-bg-glare:#ffffff;--color-text:#333333;--color-text-glare:#333333;--color-selection-text:#ffffff;--color-selection-bg:#333333;--color-stroke:#cccccc;--color-action-bg:#173854;--color-action-text:#ffffff;--color-theme-primary:#173854;--color-theme-primary-glare:#22547c;--color-theme-highlight:#fedb8b;--color-theme-highlight-block:#fedb8b}@media(prefers-color-scheme:dark){:root{--color-mode:"dark"}:root:not([data-user-color-scheme]){--color-bg:#333333;--color-bg-glare:#404040;--color-text:#ffffff;--color-selection-text:#333333;--color-selection-bg:#ffffff;--color-stroke:#404040;--color-theme-primary:#8bb8df;--color-theme-primary-glare:#b3d2ea;--color-action-bg:var(--color-theme-primary-glare);--color-action-text:#333333;--color-theme-highlight:#fedb8b;--color-theme-highlight-block:#404040;--color-theme-feature-text:#fedb8b}}[data-user-color-scheme=dark]{--color-bg:#333333;--color-bg-glare:#404040;--color-text:#ffffff;--color-selection-text:#333333;--color-selection-bg:#ffffff;--color-stroke:#404040;--color-theme-primary:#8bb8df;--color-theme-primary-glare:#b3d2ea;--color-action-bg:var(--color-theme-primary-glare);--color-action-text:#333333;--color-theme-highlight:#fedb8b;--color-theme-highlight-block:#404040;--color-theme-feature-text:#fedb8b}body{color:var(--color-text);background-color:var(--color-bg)}main{overflow:hidden}::selection{color:var(--color-selection-text);background-color:var(--color-selection-bg)}@font-face{font-family:Lora;font-style:normal;font-weight:700;font-display:swap;src:local("Lora Bold"),local("Lora-Bold"),url("https://d33wubrfki0l68.cloudfront.net/20c1339553c02855074d6145f65633ecca9bc050/17e51/fonts/lora-v13-latin-700.woff") format("woff")}body{line-height:1.56;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol'}h1,h2,h3{font-family:Lora,serif}h1{font-size:1.95rem}h2{font-size:1.56rem}h3{font-size:1.25rem}@media(min-width:48rem){h1{font-size:3.05rem}h2{font-size:2.44rem}h3{font-size:1.95rem}}body,html{height:100%}body{scroll-behavior:smooth;display:flex;flex-direction:column}main{flex:1 0 auto}main:focus{outline:0}hr{display:block;height:1px;max-width:500px;background:var(--color-stroke);border:none;margin:3.05rem auto}img{height:auto}:focus{outline:1px solid var(--color-theme-primary-glare);outline-offset:.25rem}.inner-wrapper{max-width:52rem;margin-left:auto;margin-right:auto;padding-left:1.25rem;padding-right:1.25rem}.post__footer h2 a,.skip-link:not(:focus),.visually-hidden{border:0;clip:rect(0 0 0 0);height:auto;margin:0;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap}.wrapper{max-width:58rem;margin-left:auto;margin-right:auto;padding-left:1.25rem;padding-right:1.25rem}.button{display:inline-block;border:none;background-color:var(--color-action-bg);color:var(--color-action-text);padding:.8rem 1rem;line-height:1;margin:0;text-decoration:none;cursor:pointer;-webkit-appearance:none;-moz-appearance:none}.button:focus,.button:hover{filter:brightness(1.2)}.button:focus:hover{outline:0}.button:focus:not(:hover){outline:1px solid var(--color-action-text);outline-offset:-4px}.button:active{transform:scale(.99)}table{width:100%;overflow:auto;border-collapse:collapse;color:#000}table th{padding:6px 13px;border:1px solid #dfe2e5}table tr{background-color:#fff;border-top:1px solid #c6cbd1}table tr:nth-child(2n){background-color:#f6f8fa}table td{padding:6px 13px;border:1px solid #dfe2e5}form{max-width:35rem}form br{display:none}label{display:block;font-weight:600}input,select{line-height:1}input,select,textarea{background-color:#fff;font:inherit;border:1px solid var(--color-text);margin-top:.15rem;padding:.5rem 1rem;width:100%;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol'}label input{margin:-.25rem .5rem 0 0;width:auto;vertical-align:middle}fieldset{border:0;margin:0;padding:0}legend{display:block;font-weight:700}.field-list{margin:0;padding:0;list-style:none}.field-list__field-group{margin-bottom:2rem;transition:transform 150ms}.field-list__field-group__description{display:block;margin-top:.3rem;font-size:.875rem;line-height:1.25}textarea+.field-list__field-group__description{margin-top:0}.field-list__field-group--confirm{font-weight:400}.field-list__field-group__list{list-style:none;margin:0}.field-list__field-group__list label{font-weight:400}.field-list__field-group__list .field-list__field-group__description{margin:0 0 0 1.35rem}.heading-cta{display:inline-block;text-align:center;background:#8a2be2;position:fixed;width:100%;z-index:400}.heading-cta a{color:#fff}.heading-permalink{color:var(--color-theme-primary-glare);font-size:.8em;margin-left:.3em;margin-top:.2em}@media(min-width:48rem){.heading-permalink{font-size:.6em;margin-top:.4em}}.intro{background:var(--color-theme-highlight-block)}.intro__summary{--flow-space:1.25rem;font-size:1.25rem}.intro__summary a{color:currentColor}.intro__summary a:hover{text-decoration:none}.intro__heading{max-width:40ex;color:var(--color-theme-feature-text)}.intro__heading--compact{max-width:20ex}.nav__list{overflow-x:auto;padding:.5rem;margin:-.5rem;-webkit-overflow-scrolling:touch;-ms-overflow-style:none}.nav__list::-webkit-scrollbar{display:none}.nav__list>*+*{margin-left:1.25rem}.nav__item{padding:.8rem 0;flex-shrink:0}.nav__item a{color:currentColor;font-weight:600}.nav__item a:not(:hover){text-decoration:none}.pagination{flex-wrap:wrap}.pagination a{color:var(--color-theme-primary)}.pagination a:not(:hover){text-decoration:none}.pagination a[data-direction=backwards]{flex-direction:row-reverse}.pagination a[data-direction=backwards] svg{transform:rotate(-180deg)}.pagination a[data-direction=forwards]:only-child{margin-left:auto}.pagination svg{pointer-events:none}.post__body{--flow-space:2.44rem}.post__body h2+*,.post__body h3+*{--flow-space:1.25rem}.post__body h2,.post__body h3{position:relative;line-height:1.2}.post__body a:not([class]){color:var(--color-dark);position:relative;display:inline-block;background:var(--color-theme-highlight);padding:.2rem .4rem .3rem .4rem;text-decoration:none;word-break:break-word;line-height:1.2}.post__body a:not([class]):hover{text-decoration:underline}.post__body code{font-size:1.2em;color:var(--color-theme-primary);font-weight:600;margin-left:.01ch;margin-right:.01ch}.post__body pre>code{margin-right:0;border:1px solid rgba(255,255,255,.1);overflow-x:auto;-webkit-overflow-scrolling:touch}.post__body blockquote{border-left:.4rem solid var(--color-theme-primary-glare);margin-left:0;padding-left:1.25rem;font-style:italic;font-size:1.56rem}.post__body blockquote p{opacity:.85;padding:1.25rem 0}.post__body ol:not([class]),.post__body ul:not([class]){margin-left:2.44rem}.post__body ol:not([class]) li+li,.post__body ul:not([class]) li+li{margin-top:.8rem}.post__body .video-player,.post__body .video-player+*,.post__body figure,.post__body figure+*,.post__body pre>code,.post__body video{--flow-space:4rem}.post__body .video-player,.post__body figure,.post__body pre>code,.post__body video{width:100vw;max-width:58rem;margin-left:50%;transform:translateX(-50%);position:relative}.post__body .video-player,.post__body figure img,.post__body pre>code{box-shadow:0 10px 30px rgba(0,0,0,.15)}.post__body figure img{position:relative;z-index:1}.post__body figcaption{font-size:.8em;font-style:italic;max-width:52rem;margin:.5rem auto 0 auto;padding:0 1.25rem}.post__body pre>code{display:block;background:var(--color-dark);padding:1.95rem;font-size:1.25rem}.post__footer{background:var(--color-theme-highlight)}.post__footer h2{flex-shrink:0;margin-right:1rem;color:var(--color-dark)}.post__footer a{background:var(--color-bg);padding:.4rem .6rem}.post-list__item{--flow-space:1.95rem}.post-list__link,.post-list__link:visited{color:var(--color-theme-primary);text-decoration:none}.post-list__link:hover{text-decoration:underline}.site-head{padding-top:3.6rem}.site-head__site-name{font-weight:700;text-decoration:none;color:var(--color-text)}.site-foot{background:var(--color-bg-glare);color:var(--color-text);border-top:1px solid var(--color-stroke)}.site-foot a{color:currentColor}.site-foot a:hover{text-decoration:none}.site-foot__credit{text-align:center}.skip-link:focus{display:inline-block;position:absolute;top:0;left:0;padding:.8rem 1.25rem 1rem 1.25rem;background-color:var(--color-action-bg);color:var(--color-action-text);line-height:1;text-decoration:none;font-weight:700}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:0 0;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#d4d0ab}.token.punctuation{color:#fefefe}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#ffa07a}.token.boolean,.token.number{color:#00e0e0}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#abe338}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#00e0e0}.token.atrule,.token.attr-value,.token.function{color:gold}.token.keyword{color:#00e0e0}.token.important,.token.regex{color:gold}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@media screen and (-ms-high-contrast:active){code[class*=language-],pre[class*=language-]{color:windowText;background:window}:not(pre)>code[class*=language-],pre[class*=language-]{background:window}.token.important{background:highlight;color:window;font-weight:400}.token.atrule,.token.attr-value,.token.function,.token.keyword,.token.operator,.token.selector{font-weight:700}.token.attr-value,.token.comment,.token.doctype,.token.function,.token.keyword,.token.operator,.token.property,.token.string{color:highlight}.token.attr-value,.token.url{font-weight:400}}.video-player{position:relative;padding-top:56.25%}.video-player>iframe{position:absolute;top:0;left:0;width:100%;height:100%}.post .video-player{padding-top:63%}@media(min-width:48rem){.post .video-player{padding-top:66%}}.social-share{max-width:720px;margin:0 auto;padding-top:2em;padding-left:1em;padding-right:1em;padding-bottom:2em;text-align:center}.social-share a:not([class]){background:0 0}.social-share__title{font-size:1.1em;padding-bottom:10px;font-weight:400}.social-share__text{padding-bottom:1em}.social-share__icon{width:30px;margin-right:10px;margin-left:10px;fill:#22547c}.cta-contribute{border:1px solid;border-color:var(--color-primary-glare);border-radius:3px;padding:30px}.cta-contribute__link{background-color:var(--color-action-bg);color:var(--color-action-text);padding:.5rem;display:inline-block;width:30%;text-align:center;margin-top:1rem;margin-right:1rem;text-decoration:none}.cta-contribute__link:focus,.cta-contribute__link:hover{filter:brightness(1.2)}.cta-contribute__link:focus:hover{outline:0}.cta-contribute__link:focus:not(:hover){outline:1px solid var(--color-action-text);outline-offset:-4px}.cta-contribute__link:active{transform:scale(.99)}</style></head><body><a class="skip-link" href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#main-content">Skip to content</a><div class="heading-cta"><a onclick="gtag(&#39;event&#39;, &#39;headline&#39;, {&#39;event_label&#39;: &#39;Linktree&#39;,&#39;event_category&#39;: &#39;click&#39;})" href="https://linktr.ee/malabarizando" target="_blank">Ouça meu podcast</a></div><header role="banner" class="[ site-head ] [ pad-bottom-700"><div class="wrapper"><div class="[ site-head__inner ] [ md:box-flex space-between align-center ]"><a href="https://woliveiras.com.br/" class="[ site-head__site-name ] [ leading-tight ]"><span class="visually-hidden">William Oliveira - Home</span> <span class="[ site-head__site-name ] [ text-600 ]" aria-hidden="true">William Oliveira</span></a><nav class="nav" aria-label="navigation"><ul class="[ nav__list ] [ box-flex align-center md:space-before ]"><li class="nav__item"><a onclick="gtag(&#39;event&#39;, &#39;navigation&#39;, {&#39;event_label&#39;: &#39;Apoiar&#39;,&#39;event_category&#39;: &#39;click&#39;})" href="https://apoia.se/uillaz">Apoiar</a></li><li class="nav__item"><a onclick="gtag(&#39;event&#39;, &#39;navigation&#39;, {&#39;event_label&#39;: &#39;Cursos&#39;,&#39;event_category&#39;: &#39;click&#39;})" href="https://woliveiras.com.br/cursos">Cursos</a></li><li class="nav__item"><a onclick="gtag(&#39;event&#39;, &#39;navigation&#39;, {&#39;event_label&#39;: &#39;Projeto social&#39;,&#39;event_category&#39;: &#39;click&#39;})" href="https://woliveiras.com.br/apoio-social">Projeto social</a></li><li class="nav__item"><a onclick="gtag(&#39;event&#39;, &#39;navigation&#39;, {&#39;event_label&#39;: &#39;Sobre&#39;,&#39;event_category&#39;: &#39;click&#39;})" href="https://woliveiras.com.br/sobre">Sobre</a></li></ul></nav></div></div></header><main id="main-content" tabindex="-1"><article class="[ post ] [ h-entry ]"><header class="[ intro ] [ pad-top-900 pad-bottom-max ]"><div class="[ inner-wrapper ] [ sf-flow ]"><h1 class="[ intro__heading ] [ text-800 md:text-900 leading-tight ] [ p-name ]">Construindo uma API com Node.js - Parte 1: criando e listando dados</h1><div class="[ intro__summary ] [ sf-flow ] [ leading-mid measure-short ]">Já sabemos utilizar o Node.js para construir CLIs, Express para criar um site e agora vamos aprender a construir APIs! Neste artigo vamos até a parte de criação e listagem de dados, mas o objetivo é construir um CRUD que você pode até usar como portfólio ou nos futuros hackathons por aí. :)</div><div class="[ intro__summary ] [ sf-flow ] [ leading-mid measure-short ]"><p class="[ intro__meta ] [ text-500 leading-tight ]"><time datetime="2019-7-1" class="dt-published">1/Jul/2019</time> <span>— 41 minutos de leitura</span><br></p><a class="gap-top-300 text-300" href="https://github.com/woliveiras/woliveiras.github.io/tree/main/src/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados.md">Editar este artigo</a></div></div></header><ins class="adsbygoogle" style="display:block;max-width:720px;height:90px;margin:0 auto;margin-top:1em;margin-bottom:1em" data-ad-client="ca-pub-3477794539929090" data-ad-slot="2939462684" data-ad-format="fluid" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script><div class="[ post__body ] [ inner-wrapper ] [ leading-loose pad-top-900 text-500 ] [ sf-flow ] [ e-content ]"><p>Nos últimos artigos sobre Node.js aprendemos a criar um projeto utilizando o NPM para inicializar e construímos um <a href="https://woliveiras.com.br/posts/criando-um-jokenp%C3%B4-via-linhha-de-comando-com-nodejs/">Jokenpô com entrada e saída de dados via linha de comando</a> e também a utilizamos Express, um framework web, para <a href="https://woliveiras.com.br/posts/criando-um-curr%C3%ADculo-com-node-js-express-e-templates-ejs/">construir uma página web para nosso currículo</a>.</p><p>Agora vamos aprender a construir uma API utilizando o Express. A grande diferença de uma aplicação web que renderiza o HTML no servidor e envia para o usuário final, como no exemplo que fizemos na construção do currículo, para uma API é o fato de que ao invés de entregar HTML para quem solicitou algo, nós devolvemos dados puros através de algum formato protocolado de informação.</p><p>Existem diversos formatos que podemos utilizar e você já deve ter ouvido ou vai ouvir muito sobre JSON e XML. Isso é nada mais nada menos que a maneira que nós escolhemos envelopar e enviar os dados para quem requisitou algo.</p><p>Dentro da internet nós trabalhamos com o modelo de requisição e resposta. Então, quando você acessa um endereço de site, você solicita uma página para um servidor e ele responde com o arquivo <em>.html</em>. Mas, principalmente nos sites modernos, depois que você recebeu a primeira página os dados são enviados no formato JSON e nós utilizamos JavaScript no client-side para interpretar esses dados e mostrar para o usuário final.</p><p>Ao solicitarmos uma informação para uma API, por exemplo os dados de um usuário, vamos receber algo assim:</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token string">"nome"</span><span class="token operator">:</span> <span class="token string">"William"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"idade"</span><span class="token operator">:</span> <span class="token string">"28"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"contato"</span><span class="token operator">:</span> <span class="token string">"https://twitter.com/_uillaz"</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Isso é o conteúdo de um arquivo JSON. Agora nós utilizaríamos o JavaScript para interpretar isso e colocar na tela. Porém também podemos utilizar APIs para trafegar informações entre servidores, onde uma aplicação em um servidor pede informação para outra em outro servidor e assim por diante.</p><p>Um exemplo de API que você pode conhecer, explorar e se divertir com ela é a PokéAPI, que lista todas as informações dos Pokémons. Acesse aqui e divirta-se conhecendo uma API: <a href="https://pokeapi.co/">pokeapi.co/</a>.</p><p>Mas vamos ao que interessa! Vamos criar a nossa primeira API com Node.js e Express.</p><h2 id="heading-o-projeto"><a name="Oprojeto"></a>O projeto<a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#heading-o-projeto" class="heading-permalink"><span class="visually-hidden"> permalink</span><svg fill="currentColor" aria-hidden="true" focusable="false" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2><p>A minha ideia aqui é criarmos um projeto chamado Mentions. A Mentions existe para salvarmos pérolas (coisas engraçadas) que nossos amigos e amigas dizem durante o dia. Por isso precisaremos armazenar em um banco de dados o nome e frase que essa pessoa falou para depois listarmos isso em uma página web.</p><p>Para isso iremos utilizar Node.js, Express e MongoDB (um banco de dados). Inicialmente vamos desenvolver a função de criação, listagem, atualização e deleção de menções. Depois iremos trabalhar tratamentos de erros, autenticação, etc.</p><ul><li><a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#Oprojeto">O projeto</a></li><li><a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#Inicializandooprojeto">Inicializando o projeto</a></li><li><a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#Criandooservidor">Criando o servidor</a></li><li><a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#ConectandoaoMongoDB">Conectando ao MongoDB</a></li><li><a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#Modelandonossobancodedados">Modelando nosso banco de dados</a></li><li><a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#Criandoosmtodosdecriarelistardadosdobanco">Criando os métodos de criar e listar dados do banco</a></li><li><a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#UtilizandooPostman">Utilizando o Postman</a></li><li><a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#Concluso">Conclusão</a></li></ul><h2 id="heading-inicializando-o-projeto"><a name="Inicializandooprojeto"></a>Inicializando o projeto<a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#heading-inicializando-o-projeto" class="heading-permalink"><span class="visually-hidden"> permalink</span><svg fill="currentColor" aria-hidden="true" focusable="false" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2><p>Recomendo que você crie um repositório no GitHub para guardar este nosso projeto, se você não souber fazer isso, siga <a href="https://woliveiras.com.br/posts/trabalhando-com-reposit%C3%B3rios-remotos-git-e-github/">este tutorial</a>. Crie um projeto com o nome <strong>mentions-api</strong>.</p><p>Para começar, vamos rodar o comando do NPM para inicializar nosso projeto:</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line"><span class="token function">npm</span> init -y</span></code></pre><p>Rodamos com o parâmetro <strong>-y</strong> para não ter que responder as perguntas sobre o projeto, mas se você quiser, pode rodar só o <strong>npm init</strong> e responder cada uma.</p><p>Vamos instalar o Express e o Nodemon. O Express é nosso framework web e o Nodemon nos ajuda na hora do desenvolvimento para não ser necessário ficar reiniciando o servidor a cada alteração de código fonte.</p><p>Execute no terminal:</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line"><span class="token function">npm</span> <span class="token function">install</span> --save express debug <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> <span class="token function">install</span> --save-dev nodemon</span></code></pre><p>No arquivo <strong>package.json</strong> adicione o seguinte comando na chave <strong>"scripts"</strong>:</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token string">"dev"</span><span class="token operator">:</span> <span class="token string">"node node_modules/nodemon/bin/nodemon bin/server"</span></span></code></pre><p>O arquivo ficará assim:</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token string">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token string">"dev"</span><span class="token operator">:</span> <span class="token string">"node node_modules/nodemon/bin/nodemon bin/server"</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Também vamos criar um arquivo <strong>.gitignore</strong> para adicionar alguns arquivos que não devem ser acompanhados pelo Git.</p><p>Execute:</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line"><span class="token function">touch</span> .gitignore</span></code></pre><p>E adicione as seguintes linhas no arquivo <strong>.gitignore</strong>:</p><pre><code>node_modules
.env
</code></pre><h2 id="heading-criando-o-servidor"><a name="Criandooservidor"></a>Criando o servidor<a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#heading-criando-o-servidor" class="heading-permalink"><span class="visually-hidden"> permalink</span><svg fill="currentColor" aria-hidden="true" focusable="false" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2><p>No nosso comando de inicialização (o comando "dev", que adicionamos no package.json anteriormente) adicionamos o caminho <strong>bin/server</strong> para rodar o nosso servidor. Agora vamos criar esse arquivo, que será responsável por colocar a nossa aplicação de pé.</p><p>Crie a pasta <strong>bin</strong> e o arquivo <strong>server.js</strong> dentro dela. Neste arquivo, adicione o seguinte conteúdo:</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../src/app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">const</span> debug <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'debug'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'nodestr:server'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// PORT // based on express-generator</span></span><br><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">normalizePort</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> val<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>port <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> port<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token function">normalizePort</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'port'</span><span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// error handler</span></span><br><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">onError</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>syscall <span class="token operator">!==</span> <span class="token string">'listen'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">throw</span> error<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line">  </span><br><span class="highlight-line">  <span class="token keyword">const</span> bind <span class="token operator">=</span> <span class="token keyword">typeof</span> port <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">?</span> <span class="token string">'Pipe '</span> <span class="token operator">+</span> port <span class="token operator">:</span> <span class="token string">'Port '</span> <span class="token operator">+</span> port<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">switch</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">case</span> <span class="token string">'EACCES'</span><span class="token operator">:</span></span><br><span class="highlight-line">      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>bind <span class="token operator">+</span> <span class="token string">' requires elevated privileges'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">case</span> <span class="token string">'EADDRINUSE'</span><span class="token operator">:</span></span><br><span class="highlight-line">      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>bind <span class="token operator">+</span> <span class="token string">' is already in use'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">default</span><span class="token operator">:</span></span><br><span class="highlight-line">      <span class="token keyword">throw</span> error<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// listener handler</span></span><br><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">onListening</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> addr <span class="token operator">=</span> server<span class="token punctuation">.</span><span class="token function">address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> bind <span class="token operator">=</span> <span class="token keyword">typeof</span> addr <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">?</span> <span class="token string">'pipe '</span> <span class="token operator">+</span> addr <span class="token operator">:</span> <span class="token string">'port '</span> <span class="token operator">+</span> addr<span class="token punctuation">.</span>port<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'Listening on '</span> <span class="token operator">+</span> bind<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// server</span></span><br><span class="highlight-line"><span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> onError<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'listening'</span><span class="token punctuation">,</span> onListening<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">API is alive on </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>Vamos entender este arquivo.</p><p>O que estamos fazendo aqui é chamar as dependências necessárias para subir nosso servidor HTTP e realizar o debug (procurar por erros).</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../src/app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">const</span> debug <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'debug'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'nodestr:server'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>Depois criamos uma função para normalizar a porta em que vamos expor nossa aplicação.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">normalizePort</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> val<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>port <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> port<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token function">normalizePort</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'port'</span><span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>Em seguida criamos uma função para tratar possíveis erros.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">onError</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>syscall <span class="token operator">!==</span> <span class="token string">'listen'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">throw</span> error<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">const</span> bind <span class="token operator">=</span> <span class="token keyword">typeof</span> port <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">?</span> <span class="token string">'Pipe '</span> <span class="token operator">+</span> port <span class="token operator">:</span> <span class="token string">'Port '</span> <span class="token operator">+</span> port<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">switch</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">case</span> <span class="token string">'EACCES'</span><span class="token operator">:</span></span><br><span class="highlight-line">      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>bind <span class="token operator">+</span> <span class="token string">' requires elevated privileges'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token keyword">break</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">case</span> <span class="token string">'EADDRINUSE'</span><span class="token operator">:</span></span><br><span class="highlight-line">      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>bind <span class="token operator">+</span> <span class="token string">' is already in use'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token keyword">break</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">default</span><span class="token operator">:</span></span><br><span class="highlight-line">      <span class="token keyword">throw</span> error<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Por fim criamos uma função para escutar o servidor e enfim colocamos ele no de pé.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">onListening</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> addr <span class="token operator">=</span> server<span class="token punctuation">.</span><span class="token function">address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> bind <span class="token operator">=</span> <span class="token keyword">typeof</span> addr <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">?</span> <span class="token string">'pipe '</span> <span class="token operator">+</span> addr <span class="token operator">:</span> <span class="token string">'port '</span> <span class="token operator">+</span> addr<span class="token punctuation">.</span>port<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'Listening on '</span> <span class="token operator">+</span> bind<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// server</span></span><br><span class="highlight-line"><span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> onError<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'listening'</span><span class="token punctuation">,</span> onListening<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">API is alive on </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>Agora vamos lá criar a nossa aplicação web!</p><p>Crie uma pasta chamada <strong>src</strong> e dentro desta pasta crie o arquivo <strong>app.js</strong> e adicione o seguinte conteúdo:</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// App</span></span><br><span class="highlight-line"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// Load routes</span></span><br><span class="highlight-line"><span class="token keyword">const</span> indexRoutes <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./routes/index-routes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> indexRoutes<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> app<span class="token punctuation">;</span></span></code></pre><p>O que fizemos aqui foi chamar o Express, em seguida instanciamos a aplicação na constante app e chamamos nossa primeira rota, a <strong>'/'</strong>.</p><p>Precisamos agora criar o arquivo que cuidará dessa rota. Crie a pasta <strong>routes</strong> dentro de <strong>src</strong> e adicione o arquivo <strong>index-routes.js</strong>. Adicione a este arquivo o seguinte conteúdo:</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">    title<span class="token operator">:</span> <span class="token string">'MentionsAPI'</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    version<span class="token operator">:</span> <span class="token string">'1.0.0'</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span></span></code></pre><p>Com isso o nosso comando <strong>npm run dev</strong> irá funcionar e nosso servidor estará de pé. Faça o teste. Execute o comando no seu terminal (de dentro da pasta mentions-api) e em seguida acesse localhost:3000 no seu navegador.</p><p><strong>Comando npm run dev no VS Code:</strong></p><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/vs-code-comando-npm-run-dev.png" alt="Imagem do VS Code executando o comando npm run dev" loading="lazy" width="1588" height="424"></p><p><strong>Navegador acessando localhost:3000:</strong></p><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/chrome-api-localhost.png" alt="Imagem do Google Chrome exibindo o conteúdo de localhost:3000" loading="lazy" width="1282" height="1006"></p><h2 id="heading-conectando-ao-mongodb"><a name="ConectandoaoMongoDB"></a>Conectando ao MongoDB<a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#heading-conectando-ao-mongodb" class="heading-permalink"><span class="visually-hidden"> permalink</span><svg fill="currentColor" aria-hidden="true" focusable="false" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2><p>Para trabalhar com o MongoDB, um banco de dados NoSQL, seria necessário instalar o software em nosso sistema operacional, mas, para economizar nosso tempo e espaço em disco, vamos utilizar um serviço chamado Atlas, da própria marca MongoDB.</p><p>Acesse o site <a href="https://www.mongodb.com/cloud">mongodb.com/cloud</a> e procure pelo botão <strong>Get started free</strong> (ou pelo botão de Login, se você já tiver uma conta na MongoDB Cloud).</p><p>Será necessário criar uma conta na plataforma para então criarmos nossos <em>clusteres</em> de bancos de dados. Não se preocupe, será tudo gratuito. :smile:</p><p>Com sua conta criada e feito o login, agora será necessário criar um projeto, onde vamos criar nossos bancos de dados. Procure pelo botão <strong>New Project</strong> e pode dar o nome de <strong>mentions-api-project</strong>.</p><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/create-a-project-atlas-mongodb.png" alt="Imagem da criação do projeto" loading="lazy" width="1466" height="694"></p><p>A próxima tela é onde adicionamos mais pessoas para administrar este projeto. No nosso caso não vamos precisar adicionar ninguém, pode somente clicar em <strong>Create Project</strong>.</p><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/create-a-project-atlas-mongodb-admin-email.png" alt="Imagem de confirmação com email de administrador" loading="lazy" width="2052" height="1002"></p><p>Agora temos uma tela para criação de um Cluster, onde vamos armazenar nossos dados.</p><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/create-a-project-atlas-mongodb-create-a-cluster.png" alt="Imagem do botão de criação de clusters" loading="lazy" width="2562" height="1052"></p><p>Clique no botão <strong>Build a Cluster</strong>. Irá aparecer uma tela para escolhermos o provedor de serviços que, atualmente, são: Amazon AWS, Google Cloud e Microsoft Azure. Neste momento tanto faz o provedor que iremos escolher, pois este projeto é somente de exemplo e iremos utilizar o <strong>Free Tier</strong>, versão gratuita dos serviços, que é limitada a 512 MB de armazenamento. Se quiser, pode deixar como está e clicar em <strong>Create a Cluster</strong>.</p><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/create-a-project-atlas-mongodb-free-tier.png" alt="Imagem da criação de cluster no free tier" loading="lazy" width="1770" height="1804"></p><p>Irá aparecer uma mensagem de andamento da criação do Cluster.</p><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/create-a-project-atlas-mongodb-creating-a-cluster.png" alt="Imagem da mensagem de andamento de criação do Cluster" loading="lazy" width="2612" height="1088"></p><p>Assim que estiver tudo pronto, teremos as métricas de acesso do cluster em nossa tela.</p><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/create-a-project-atlas-mongodb-clusters.png" alt="Imagem das métricas do cluster" loading="lazy" width="2564" height="950"></p><p>O que vamos fazer agora é a conexão do nosso projeto Node.js com o banco de dados. Para isso vamos utilizar variáveis de ambiente, que vamos colocar em um arquivo de configuração, e o Mongoose, uma lib que facilita a utilização do MongoDB.</p><p>Vamos instalar as dependências, execute o comando:</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line"><span class="token function">npm</span> <span class="token function">install</span> --save mongoose dotenv</span></code></pre><p>A lib dotenv será responsável por ler o arquivo .env que vamos criar em breve (<strong>e que não deve ser enviado para o GitHub</strong>) e carregar as nossas variáveis de ambiente, que vamos criar já já.</p><p>Para conectar a um banco de dados precisamos de algumas informações, como:</p><ul><li>endereço de IP ou domínio do servidor do banco de dados</li><li>a porta pela qual temos acesso a API do banco</li><li>usuário e senha para acesso ao banco</li></ul><p>No nosso cluster temos todas essas informações, mas, antes de qualquer coisa, precisamos criar um usuário com poderes leitura e escrita no banco. Procure pelo item <strong>Database Access</strong> no menu do cluster (estará ao lado esquerdo da tela) e em seguida clique em <strong>add new user</strong>.</p><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/create-a-project-atlas-mongodb-cluster-users.png" alt="Imagem da tela de usuários do cluster" loading="lazy" width="2030" height="1076"></p><p>Você pode dar um nome legal para o seu usuário, mas a senha eu recomendo que você use a recomendada pela plataforma clicando no botão <strong>Autogenerate Secure Password</strong>. Na parte de privilégios, deixe como <strong>Read and Write</strong>, leitura e escrita no banco de dados.</p><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/create-a-project-atlas-mongodb-cluster-users-creating.png" alt="Tela de criação de usuário" loading="lazy" width="1654" height="1158"></p><p>Será necessário aguardar o cluster aplicar as configurações.</p><p>Agora você pode voltar na tela de clusters (clicando em Clusters, na esquerda) e vamos pegar a connection string, a linha de texto de configuração do nosso banco de dados. Clique em <strong>connect</strong>. Irá aparecer uma tela de configuração de liberação de endereços de IP para acesso ao banco, clique no botão <strong>Allow Access from Anywhere</strong> e depois em <strong>Add</strong> para liberarmos para qualquer endereço, pois inicialmente não teremos controle do endereço de IP da nossa aplicação no servidor de hospedagem. Agora clique em <strong>Choose a connection method</strong>, depois em <strong>Connect Your Application</strong>. O próprio Atlas nos dá a opção de connection string, basta copiar isso e vamos colar em nosso .env. Crie o arquivo <strong>.env</strong> na raiz do nosso projeto (fora da pasta <strong>src</strong>).</p><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/create-a-project-atlas-mongodb-connection-string.png" alt="Imagem da connection string" loading="lazy" width="1464" height="1416"></p><p>No arquivo <strong>.env</strong>, escreva <strong>DATABASE_CONNECTION_STRING</strong> e cole o código que copiou no Atlas. O arquivo ficará parecido com isso aqui:</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line"><span class="token assign-left variable">DATABASE_CONNECTION_STRING</span><span class="token operator">=</span>mongodb+srv://admin:<span class="token operator">&lt;</span>password<span class="token operator">&gt;</span>@cluster0-8xYz.mongodb.net/banco?retryWrites<span class="token operator">=</span>true<span class="token operator">&amp;</span><span class="token assign-left variable">w</span><span class="token operator">=</span>majority</span></code></pre><p>Você terá que modificar o texto <strong><password></password></strong>para a senha do seu usuário. Ficará algo como <strong>usuario:senha</strong> e o restante do conteúdo.</p><p>Agora vamos adicionar as linhas de código necessárias para conectar ao Atlas. No arquivo <strong>app.js</strong> adicione as seguintes linhas logo no começo abaixo da chamada do Express <strong>const express = require('express')</strong>:</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dotenv'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>Depois do nosso <code>const app = express();</code>, adicione as seguintes linhas:</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token comment">// Database</span></span><br><span class="highlight-line">mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATABASE_CONNECTION_STRING</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    useNewUrlParser<span class="token operator">:</span> <span class="token boolean">true</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> db <span class="token operator">=</span> mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">;</span></span><br><span class="highlight-line">  </span><br><span class="highlight-line">db<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connected'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Mongoose default connection is open'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">db<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Mongoose default connection has occured \n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>err<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">db<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'disconnected'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Mongoose default connection is disconnected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'SIGINT'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    db<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token string">'Mongoose default connection is disconnected due to application termination'</span></span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>Se você executou o comando <strong>npm run dev</strong> e deixou ele rodando, o Nodemon deve ter recarregado o código e teremos a seguinte mensagem aparecendo no terminal:</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line"><span class="token punctuation">[</span>nodemon<span class="token punctuation">]</span> restarting due to changes<span class="token punctuation">..</span>.</span><br><span class="highlight-line"><span class="token punctuation">[</span>nodemon<span class="token punctuation">]</span> starting <span class="token variable"><span class="token variable">`</span>node bin/server.js<span class="token variable">`</span></span></span><br><span class="highlight-line">API is alive on <span class="token number">3000</span><span class="token operator">!</span></span><br><span class="highlight-line">Mongoose default connection is <span class="token function">open</span></span></code></pre><p>Vamos entender as linhas de código que adicionamos no app.js.</p><p>Primeiro nós usamos o mongoose para criar uma conexão com a connection string do banco de dados que passamos via variável de ambiente (process.env.DATABASE_CONNECTION_STRING). Também passamos algumas configurações importantes para o funcionamento do mongoose.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line">mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATABASE_CONNECTION_STRING</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    useUnifiedTopology<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    useFindAndModify<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    useNewUrlParser<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    useCreateIndex<span class="token operator">:</span> <span class="token boolean">true</span> </span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>Em seguida recuperamos a instância do mongoose para podermos manipular o que acontece em alguns momentos, como na hora da conexão com o banco de dados (connected), quando a conexão apresenta erro (error), ao desconectar (disconnected) e quando o usuário matar o processo do Node.js (SIGINT).</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> db <span class="token operator">=</span> mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">;</span></span><br><span class="highlight-line">  </span><br><span class="highlight-line">db<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connected'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Mongoose default connection is open'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">db<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Mongoose default connection has occured \n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>err<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">db<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'disconnected'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Mongoose default connection is disconnected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'SIGINT'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    db<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token string">'Mongoose default connection is disconnected due to application termination'</span></span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>Com isso temos a nossa aplicação Express conectada com o MongoDB em um cluster na nuvem (cloud) nos servidores da Amazon AWS (ou no que você escolheu como provedor) via Atlas Cloud.</p><h2 id="heading-modelando-nosso-banco-de-dados"><a name="Modelandonossobancodedados"></a>Modelando nosso banco de dados<a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#heading-modelando-nosso-banco-de-dados" class="heading-permalink"><span class="visually-hidden"> permalink</span><svg fill="currentColor" aria-hidden="true" focusable="false" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2><p>Utilizando o MongoDB, a maneira de modelar o banco de dados é utilizando o Schema. O schema é um objeto JSON que dirá o que temos no banco de dados, o que podemos inserir em um modelo (Model), quais campos são obrigatórios e podemos até fazer validações quando alguém inserir algo ali.</p><p>Vamos criar um modelo para as nossas menções. Imaginando que a nossa API será usada por uma aplicação que existe para guardar pérolas que nossos amigos disseram, nós só precisamos guardar o nome do amigo (friend) e o que ele disse (a mention).</p><p>Crie a pasta <strong>models</strong> dentro da pasta <strong>src</strong> e depois crie o arquivo <strong>mentions.js</strong> com o seguinte conteúdo:</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">const</span> Schema <span class="token operator">=</span> mongoose<span class="token punctuation">.</span>Schema<span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> schema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  friend<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    type<span class="token operator">:</span> String<span class="token punctuation">,</span></span><br><span class="highlight-line">    required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    trim<span class="token operator">:</span> <span class="token boolean">true</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  mention<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    type<span class="token operator">:</span> String<span class="token punctuation">,</span></span><br><span class="highlight-line">    required<span class="token operator">:</span> <span class="token boolean">true</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Mentions'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>Vamos entender o que aconteceu.</p><p>Nós estamos chamando o módulo mongoose.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>Em seguida instanciamos o Schema, um objeto do namespace mongoose. Assim como fazemos com Express.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> Schema <span class="token operator">=</span> mongoose<span class="token punctuation">.</span>Schema<span class="token punctuation">;</span></span></code></pre><p>Em seguida nós modelamos nosso schema de fato e exportamos um <strong>model</strong> pelo mongoose.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> schema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  friend<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    type<span class="token operator">:</span> String<span class="token punctuation">,</span></span><br><span class="highlight-line">    required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    trim<span class="token operator">:</span> <span class="token boolean">true</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  mention<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    type<span class="token operator">:</span> String<span class="token punctuation">,</span></span><br><span class="highlight-line">    required<span class="token operator">:</span> <span class="token boolean">true</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Mentions'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>Para que este modelo possa ser acessado por outras partes do sistema, vamos importar ele no nosso arquivo <strong>app.js</strong>. Coloque a seguinte linha de código logo depois da chamada para o banco de dados no arquivo app.js.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token comment">// Load models</span></span><br><span class="highlight-line"><span class="token keyword">const</span> Mentions <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./models/mentions'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>Com isso, em todos os locais que invocarmos o model Mentions, estamos referenciando a uma estrutura que será igual a essa. Quando executarmos um método de inserir dados no banco, o mongoose vai nos solicitar que ele siga os valores tenham a estrutura solicitada no schema, para procurar dados no banco também.</p><h2 id="heading-criando-os-metodos-de-criar-e-listar-dados-do-banco"><a name="Criandoosmtodosdecriarelistardadosdobanco"></a>Criando os métodos de criar e listar dados do banco<a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#heading-criando-os-metodos-de-criar-e-listar-dados-do-banco" class="heading-permalink"><span class="visually-hidden"> permalink</span><svg fill="currentColor" aria-hidden="true" focusable="false" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2><p>Agora podemos partir para a criação dos métodos que irão criar e listar os dados do banco de dados. Para isso crie uma pasta <strong>controllers</strong> dentro de <strong>src</strong> e crie o arquivo <strong>mentions-controller.js</strong> com o seguinte conteúdo:</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">const</span> Mentions <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Mentions'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// list</span></span><br><span class="highlight-line">exports<span class="token punctuation">.</span><span class="token function-variable function">listMentions</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> Mentions<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>message<span class="token operator">:</span> <span class="token string">'Falha ao carregar as menções.'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// create</span></span><br><span class="highlight-line">exports<span class="token punctuation">.</span><span class="token function-variable function">createMention</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> mention <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mentions</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">      friend<span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>friend<span class="token punctuation">,</span></span><br><span class="highlight-line">      mention<span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>mention</span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mention<span class="token punctuation">)</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">await</span> mention<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">201</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>message<span class="token operator">:</span> <span class="token string">'Menção cadastrada com sucesso!'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>message<span class="token operator">:</span> <span class="token string">'Falha ao cadastrar a menção.'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span></code></pre><p>Vamos entender este arquivo. Primeiro estamos importando o mongoose e referenciando nosso model Mentions para podermos utilizar seus métodos no controller.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">const</span> Mentions <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Mentions'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>Em seguida criamos o método de listagem de dados, que é uma <strong>função assíncrona</strong> que aguarda (await) a chamada de Mentions.find(). Quando Mentions.find retornar algum valor, ele será armazenado em <strong>data</strong> e devolvido pelo express através de <strong>res.status(200).send(data)</strong>. Caso aconteça algo errado, retornamos o erro "Falha ao carregar as menções".</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line">exports<span class="token punctuation">.</span><span class="token function-variable function">listMentions</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> Mentions<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>message<span class="token operator">:</span> <span class="token string">'Falha ao carregar as menções.'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span></code></pre><p>Logo depois temos o método de inserção de dados, que cria uma instância de Mentions (new Mention) e passa para o modelo os dados que recebemos via <strong>req.body</strong>. A nossa função também é <strong>assíncrona</strong> e aguarda a consolidação da inserção dos dados (await mention.save()). Então temos o envio de uma mensagem para o usuário informando que deu tudo certo ou uma mensagem de erro.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line">exports<span class="token punctuation">.</span><span class="token function-variable function">createMention</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> mention <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mentions</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">      friend<span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>friend<span class="token punctuation">,</span></span><br><span class="highlight-line">      mention<span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>mention</span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">await</span> mention<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">201</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>message<span class="token operator">:</span> <span class="token string">'Menção cadastrada com sucesso!'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>message<span class="token operator">:</span> <span class="token string">'Falha ao cadastrar a menção.'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span></code></pre><p>Agora temos que criar uma rota para isso acontecer e adicionar a chamada para o nosso controller e a nova rota ao app.js, mas repare que temos alguns pontos novos na nossa aprendizagem até aqui: os códigos 200, 201 e 500 e esse negócio de async e await. Antes de prosseguir, vamos entender o que é isso?</p><p><strong>Códigos de status HTTP</strong></p><blockquote><p>Trabalhando com a internet, por baixo dos panos, nós trocamos mensagens entre servidor e navegador, entre servidor e servidor e entre servidor e outros dispositivos. Dentro dessas mensagens existe algo chamado <strong>status code</strong>. Esse status code diz o que aconteceu em nosso servidor, como:</p><ul><li>200: tudo OK</li><li>201: criado</li><li>400: sua requisição tem algum problema</li><li>404: o conteúdo que você pediu não foi encontrado</li><li>500: deu um problema no nosso servidor</li><li>503: serviço inoperante</li></ul><p>Existem muitos status codes. Eles existem para facilitar a comunicação via rede e por isso precisam que ser bem amplos. Na documentação da Mozilla você tem mais status codes, <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status">MDN - HTTP/status</a>, mas o que precisa para agora são esses que informei.</p></blockquote><p><strong>Async/Await</strong></p><blockquote><p>Async/await é uma maneira de trabalhar com programação assíncrona em JavaScript. Algo assíncrono pode ser uma função, comunicação ou qualquer execução de código que vai demorar um tempo e precisamos esperar isso acontecer para enfim voltar a trabalhar/executar o resto do código. Para que o processamento não fique travado nesse pedaço de código, como no nosso caso que é uma chamada ao banco de dados e isso pode demorar, nós utilizamos o modo async para dizer: Express, espere o banco de dados retornar e depois você pode continuar aqui, enquanto isso pode ir fazer qualquer coisa que ainda tiver que fazer.</p><p>Poderia ser qualquer coisa, como escrever em disco (gravar um arquivo), esperar um cronômetro, aguardar uma chamada para outra API. Para tudo o que for necessário esperar um processamento, podemos utilizar async/await.</p></blockquote><p>Sabendo sobre programação assíncrona e os status code, podemos voltar para a criação da nossa rota e adicionar isso ao app.js. Dentro de <strong>src</strong> navegue até a pasta chamada <strong>routes</strong> e adicione o arquivo <strong>mentions-routes.js</strong> com o seguinte conteúdo:</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">const</span> mentionsController <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../controllers/mentions-controller'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> mentionsController<span class="token punctuation">.</span>listMentions<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> mentionsController<span class="token punctuation">.</span>createMention<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span></span></code></pre><p>Essa parte você já deve estar dominando! Estamos importando o Express, instanciando o Router, importando o controller de mentions, criando nossas rotas e enfim exportando nosso router.</p><p>Agora adicione ao <strong>app.js</strong> a chamada para a nossa nova rota logo depois da chamada de index-routes.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> mentionsRoutes <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./routes/mentions-routes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/mentions'</span><span class="token punctuation">,</span> mentionsRoutes<span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>O arquivo app.js estará assim:</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dotenv'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// App</span></span><br><span class="highlight-line"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span>extended<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// Database</span></span><br><span class="highlight-line">mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATABASE_CONNECTION_STRING</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    useUnifiedTopology<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    useFindAndModify<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    useNewUrlParser<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    useCreateIndex<span class="token operator">:</span> <span class="token boolean">true</span> </span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> db <span class="token operator">=</span> mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">;</span></span><br><span class="highlight-line">  </span><br><span class="highlight-line">db<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connected'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Mongoose default connection is open'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">db<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Mongoose default connection has occured \n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>err<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">db<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'disconnected'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Mongoose default connection is disconnected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'SIGINT'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    db<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token string">'Mongoose default connection is disconnected due to application termination'</span></span><br><span class="highlight-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// Load models</span></span><br><span class="highlight-line"><span class="token keyword">const</span> Mentions <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./models/mentions'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// Load routes</span></span><br><span class="highlight-line"><span class="token keyword">const</span> indexRoutes <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./routes/index-routes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> indexRoutes<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> mentionsRoutes <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./routes/mentions-routes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/mentions'</span><span class="token punctuation">,</span> mentionsRoutes<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"></span><br><span class="highlight-line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> app<span class="token punctuation">;</span></span></code></pre><p>Vamos testar se está tudo certo? Para isso vamos precisar de uma aplicação client que consiga enviar get e post. Não conseguiremos fazer isso somente com a URL sendo acessada pelo navegador, vamos precisar criar toda a aplicação JavaScript que executa isso. Como não queremos mexer com frontend neste momento, vamos utilizar um software chamado Postman, que irá nos ajudar a testar as chamadas da nossa API.</p><h2 id="heading-utilizando-o-postman"><a name="UtilizandooPostman"></a>Utilizando o Postman<a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#heading-utilizando-o-postman" class="heading-permalink"><span class="visually-hidden"> permalink</span><svg fill="currentColor" aria-hidden="true" focusable="false" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2><p>Acesse o link para download do Postman, nosso software de testes de requisição e resposta: <a href="https://www.getpostman.com/downloads/">getpostman.com/downloads</a>. A versão que aparece já será a disponível para o seu sistema operacional, baixe e instale ela.</p><p>Com tudo pronto, abra o Postman e irá ver uma tela parecida com essa:</p><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/postman-welcome-page.png" alt="Tela inicial do Postman, com mensagem de boas vindas" loading="lazy" width="2766" height="1772"></p><p>Pode clicar no botão fechar e vamos aprender a fazer chamadas com o software.</p><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/postman-interface.png" alt="Interface do Postman" loading="lazy" width="2758" height="1780"></p><p>Clique no botão de mais (+) e ele irá abrir uma caixa onde você pode inserir um endereço e enviar (clicando em Send). Se a sua API ainda estiver de pé (se você não matou o nosso servidor que roda no npm run dev) adicione o endereço inicial (localhost:3000) e clique em send. Você receberá a resposta como aconteceu no navegador.</p><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/postman-localhost-3000.png" alt="Resposta de localhost:300 no Postman" loading="lazy" width="2796" height="1760"></p><p>Do lado do endereço podemos especificar o verbo HTTP (GET, POST, DELETE, etc) que estamos enviando para o servidor e assim vamos ter as respostas que adicionamos em <strong>app.get</strong> e <strong>app.post</strong> no Express.</p><p>Faça um GET em mentions (localhost:3000/mentions) e veja o resultado:</p><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/postman-list-data-empty.png" alt="Postman com a resposta vazia do GET em localhost:3000/mentions" loading="lazy" width="2814" height="1780"></p><p>Agora vamos fazer um POST e criar nossa primeira menção. Mude o verbo para POST, no campo do lado da URL. Deixe a URL como mentions mesmo, pois é a que adicionamos em nossa routes. Logo abaixo da URL temos algumas abas, clique em <strong>Body</strong>, depois selecione <strong>raw</strong> e em seguida selecione <strong>JSON (application/json)</strong>. Cole o seguinte conteúdo dentro da caixa de texto do Postman:</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">	<span class="token string">"friend"</span><span class="token operator">:</span> <span class="token string">"Seu Madruga"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">	<span class="token string">"mention"</span><span class="token operator">:</span> <span class="token string">"A vingança nunca é plena, mata a alma e a envenena"</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/postman-full-post-requisition.png" alt="Imagem de uma requisição post no Postman" loading="lazy" width="2284" height="1756"></p><p>Perceba que estamos enviando um JSON com as chaves que precisamos no Schema para a rota mentions com o verbo post. Ele vai ativar a chamada <strong>router.post('/', mentionsController.createMention)</strong> no nosso mentions-controller que vai executar o model adicionando no banco de dados os itens que mandamos via body.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line">    <span class="token keyword">const</span> mention <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mentions</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">      friend<span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>friend<span class="token punctuation">,</span></span><br><span class="highlight-line">      mention<span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>mention</span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>Se tudo sair bem, logo abaixo da nossa caixa de texto, vai aparecer a mensagem que retorna quando o dado é cadastrado no banco com sucesso.</p><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/postman-success-post-message.png" alt="Imagem de sucesso no Postman" loading="lazy" width="2286" height="1790"></p><p>Agora, se entrarmos em localhost:3000/mentions pelo navegador ou enviar um GET localhost:3000/mentions no Postman, vamos receber de retorno o item cadastrado no banco de dados.</p><p><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/postman-listing-data.png" alt="Imagem do Postman com o retorno OK da API" loading="lazy" width="2294" height="1764"></p><h2 id="heading-conclusao"><a name="Concluso"></a>Conclusão<a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#heading-conclusao" class="heading-permalink"><span class="visually-hidden"> permalink</span><svg fill="currentColor" aria-hidden="true" focusable="false" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2><p>Até aqui temos uma API recebendo requisições e retornando informações. Criamos toda a estrutura de código necessária para trabalharmos em cima disso com Node.js, Express, MongoDB e mongoose. Incluímos variáveis de ambiente para garantir uma certa segurança em nossa aplicação, criamos uma conta e um cluster no Atlas, para guardar nossos dados e já estamos listando e criando dados nas coleções do MongoDB via Postman.</p><p>Os próximos passos para nossa API são:</p><ul><li>Limpar a resposta do GET mentions que está retornando informações inúteis para o usuário, como "_id" e "__v"</li><li>Criar uma função de deletar menções</li><li>Criar uma função de atualizar menções</li><li>Subir nossa API em um serviço de hospedagem</li></ul><p>Nos próximos artigos vamos aprender isso. Fique de olho!</p><p>Me acompanhe no Twitter para saber quando lançar alguma coisa aqui no Blog: <a href="https://twitter.com/_uillaz">@_uillaz</a>.</p><p><a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-2-melhorando-nossa-cria%C3%A7%C3%A3o-e-listagem-de-dados/">Leia a Parte 2: melhorando nossa criação e listagem</a></p><p><a href="https://unsplash.com/photos/2uTjeMfeVEU">Photo by Ed van duijn on Unsplash</a>.</p><div class="cta-contribute"><h3 id="heading-este-conteudo-te-ajudou">Este conteúdo te ajudou?<a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#heading-este-conteudo-te-ajudou" class="heading-permalink"><span class="visually-hidden"> permalink</span><svg fill="currentColor" aria-hidden="true" focusable="false" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h3><p>Se eu consegui te ajudar, considere contribuir com o meu trabalho através dos links abaixo.</p><span>Qualquer valor é muito bem vindo e os apoios começam a partir de 1 real.</span> <a class="cta-contribute__link" onclick="gtag(&#39;event&#39;, &#39;contribute&#39;, {&#39;event_label&#39;: &#39;Apoiase&#39;,&#39;event_category&#39;: &#39;click&#39;})" href="https://apoia.se/uillaz">Apoiar via Apoia.se </a><a class="cta-contribute__link" onclick="gtag(&#39;event&#39;, &#39;contribute&#39;, {&#39;event_label&#39;: &#39;PicPay&#39;,&#39;event_category&#39;: &#39;click&#39;})" href="https://picpay.me/uillaz">Apoiar via PicPay </a><a class="cta-contribute__link" onclick="gtag(&#39;event&#39;, &#39;contribute&#39;, {&#39;event_label&#39;: &#39;PayPal&#39;,&#39;event_category&#39;: &#39;click&#39;})" href="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&amp;business=UYA6AM2HP4NES&amp;currency_code=BRL">Apoiar via PayPal</a></div></div><div class="[ post__body ] [ inner-wrapper ] [ leading-loose pad-top-900 pad-bottom-900 text-500 ] [ sf-flow ] [ e-content ]"><section class="social-share"><h3 class="social-share__title" id="heading-espalhe-a-palavra!">Espalhe a palavra!<a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#heading-espalhe-a-palavra!" class="heading-permalink"><span class="visually-hidden"> permalink</span><svg fill="currentColor" aria-hidden="true" focusable="false" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h3><p class="social-share__text">Compartilhe este artigo nas redes sociais clicando nos ícones.</p><a href="https://twitter.com/intent/tweet?text=%22Construindo%20uma%20API%20com%20Node.js%20-%20Parte%201:%20criando%20e%20listando%20dados%22%20por%20@_uillaz%20https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/&amp;hashtags=javascript,nodejs,express,curso-fullstack," onclick="gtag(&#39;event&#39;, &#39;share-button&#39;, {&#39;event_label&#39;: &#39;Twitter Share&#39;,&#39;event_category&#39;: &#39;click&#39;});window.open(this.href, &#39;twitter-share&#39;, &#39;width=720,height=400&#39;);return false;" title="Compartilhe no Twitter"><svg class="social-share__icon" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809 c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"></path></svg> </a><a href="https://www.facebook.com/sharer/sharer.php?u=https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/" onclick="gtag(&#39;event&#39;, &#39;share-button&#39;, {&#39;event_label&#39;: &#39;Facebook Share&#39;,&#39;event_category&#39;: &#39;click&#39;});window.open(this.href, &#39;facebook-share&#39;,&#39;width=720,height=400&#39;);return false;" title="Compartilhe no Facebook"><svg class="social-share__icon" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22.675 0h-21.35c-.732 0-1.325.593-1.325 1.325v21.351c0 .731.593 1.324 1.325 1.324h11.495v-9.294h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12v9.293h6.116c.73 0 1.323-.593 1.323-1.325v-21.35c0-.732-.593-1.325-1.325-1.325z"></path></svg> </a><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/&amp;title=Construindo%20uma%20API%20com%20Node.js%20-%20Parte%201:%20criando%20e%20listando%20dados&amp;summary=J%C3%A1%20sabemos%20utilizar%20o%20Node.js%20para%20construir%20CLIs,%20Express%20para%20criar%20um%20site%20e%20agora%20vamos%20aprender%20a%20construir%20APIs!%20Neste%20artigo%20vamos%20at%C3%A9%20a%20parte%20de%20cria%C3%A7%C3%A3o%20e%20listagem%20de%20dados,%20mas%20o%20objetivo%20%C3%A9%20construir%20um%20CRUD%20que%20voc%C3%AA%20pode%20at%C3%A9%20usar%20como%20portf%C3%B3lio%20ou%20nos%20futuros%20hackathons%20por%20a%C3%AD.%20:)&amp;source=William%20Oliveira%20|%20Inclus%C3%A3o%20social%20atrav%C3%A9s%20do%20ensino%20de%20programa%C3%A7%C3%A3o%20e%20front-end" onclick="gtag(&#39;event&#39;, &#39;share-button&#39;, {&#39;event_label&#39;: &#39;LinkedIn Share&#39;,&#39;event_category&#39;: &#39;click&#39;});window.open(this.href, &#39;pop-up&#39;, &#39;left=20,top=20,width=500,height=500,toolbar=1,resizable=0&#39;); return false;" title="Share on LinkedIn"><svg class="social-share__icon" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg> </a><a href="mailto:?subject=Construindo%20uma%20API%20com%20Node.js%20-%20Parte%201:%20criando%20e%20listando%20dados&amp;body=D%C3%A1%20uma%20olhada%20nesse%20artigo%20que%20eu%20acabei%20de%20ler%20no%20blog%20do%20William%20Oliveira!%20https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/" onclick="gtag(&#39;event&#39;, &#39;share-button&#39;, {&#39;event_label&#39;: &#39;Email Share&#39;,&#39;event_category&#39;: &#39;click&#39;})" title="Share via Email"><svg class="social-share__icon" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 12.713l-11.985-9.713h23.971l-11.986 9.713zm-5.425-1.822l-6.575-5.329v12.501l6.575-7.172zm10.85 0l6.575 7.172v-12.501l-6.575 5.329zm-1.557 1.261l-3.868 3.135-3.868-3.135-8.11 8.848h23.956l-8.11-8.848z"></path></svg></a></section></div><footer class="[ post__footer ] [ pad-top-500 pad-bottom-500 ]"><div class="inner-wrapper"><div class="[ nav ] [ box-flex align-center ]"><h2 class="font-base text-600 weight-mid" id="heading-tags:">Tags:<a href="https://woliveiras.com.br/posts/construindo-uma-api-com-node-js-parte-1-criando-e-listando-dados/#heading-tags:" class="heading-permalink"><span class="visually-hidden"> permalink</span><svg fill="currentColor" aria-hidden="true" focusable="false" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2><ul class="[ nav__list ] [ box-flex align-center pad-left-400 ] [ p-category ]"><li class="nav__item"><a onclick="gtag(&#39;event&#39;, &#39;tags&#39;, {&#39;event_label&#39;: &#39;javascript&#39;,&#39;event_category&#39;: &#39;click&#39;})" href="https://woliveiras.com.br/tags/javascript">javascript</a></li><li class="nav__item"><a onclick="gtag(&#39;event&#39;, &#39;tags&#39;, {&#39;event_label&#39;: &#39;nodejs&#39;,&#39;event_category&#39;: &#39;click&#39;})" href="https://woliveiras.com.br/tags/nodejs">nodejs</a></li><li class="nav__item"><a onclick="gtag(&#39;event&#39;, &#39;tags&#39;, {&#39;event_label&#39;: &#39;express&#39;,&#39;event_category&#39;: &#39;click&#39;})" href="https://woliveiras.com.br/tags/express">express</a></li><li class="nav__item"><a onclick="gtag(&#39;event&#39;, &#39;tags&#39;, {&#39;event_label&#39;: &#39;curso-fullstack&#39;,&#39;event_category&#39;: &#39;click&#39;})" href="https://woliveiras.com.br/tags/curso-fullstack">curso-fullstack</a></li></ul></div></div></footer></article></main><footer role="contentinfo" class="[ site-foot ] [ pad-top-700 pad-bottom-900 ]"><div class="wrapper"><div class="[ site-foot__inner ] [ md:box-flex space-between align-start ]"><div><article class="[ site-foot__details ] [ sf-flow measure-compact ]"><h2 class="font-base text-600">William Oliveira</h2><p>Inclusão social através do ensino de programação e front-end</p></article><img style="margin-top:20px" src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/badge-success.svg" alt="bagde do Netlify sobre o status do deploy"> <a target="_blank" href="http://smallactsmanifesto.org/" title="Small Acts Manifesto"><img src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/smallacts-badge-80x15.png" style="border:none;height:20px" alt="Small Acts Manifesto"></a></div><div><nav class="nav" aria-label="footer navigation"><ul class="[ nav__list ] [ box-flex align-center md:space-before ]"><li class="nav__item"><a onclick="gtag(&#39;event&#39;, &#39;navigation&#39;, {&#39;event_label&#39;: &#39;Apoiar&#39;,&#39;event_category&#39;: &#39;click&#39;})" href="https://apoia.se/uillaz">Apoiar</a></li><li class="nav__item"><a onclick="gtag(&#39;event&#39;, &#39;navigation&#39;, {&#39;event_label&#39;: &#39;Cursos&#39;,&#39;event_category&#39;: &#39;click&#39;})" href="https://woliveiras.com.br/cursos">Cursos</a></li><li class="nav__item"><a onclick="gtag(&#39;event&#39;, &#39;navigation&#39;, {&#39;event_label&#39;: &#39;Projeto social&#39;,&#39;event_category&#39;: &#39;click&#39;})" href="https://woliveiras.com.br/apoio-social">Projeto social</a></li><li class="nav__item"><a onclick="gtag(&#39;event&#39;, &#39;navigation&#39;, {&#39;event_label&#39;: &#39;Sobre&#39;,&#39;event_category&#39;: &#39;click&#39;})" href="https://woliveiras.com.br/sobre">Sobre</a></li></ul></nav><theme-toggle>
      <div class="[ theme-toggle ] [ md:ta-right gap-top-500 ]">
        <div role="status" class="[ visually-hidden ][ js-mode-status ]">Color mode is now "dark"</div>
        <button class="[ button ] [ font-base text-base weight-bold ] [ js-mode-toggle ]">Light theme</button>
      </div>
    </theme-toggle></div></div><p class="[ site-foot__credit ] [ pad-top-900 ]">Desenvolvido com <a href="https://www.11ty.dev/" rel="external">Eleventy</a> e <a href="https://hylia.website/" rel="external">Hylia Eleventy Starter Kit v0.7.0</a>.</p></div></footer><script type="module" async="" defer="defer" src="./Construindo uma API com Node.js - Parte 1_ criando e listando dados - William Oliveira_files/theme-toggle.js.download"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js');
      });
    }</script></body></html>